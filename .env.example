# Application
NODE_ENV=development
PORT=8080

# Rate Limit Mode: shadow | logging | enforcement
RATE_LIMIT_MODE=shadow

# Redis Configuration
REDIS_CLUSTER_NODES=localhost:6379,localhost:6380,localhost:6381,localhost:6382,localhost:6383,localhost:6384
REDIS_PASSWORD=
REDIS_TIMEOUT_MS=100
REDIS_MAX_RETRIES=3
REDIS_POOL_SIZE=50

# MongoDB Configuration
MONGODB_URI=mongodb://localhost:27017/rate_limiter
MONGODB_POOL_SIZE=10
MONGODB_CONNECT_TIMEOUT_MS=10000

# Policy Cache Configuration
POLICY_CACHE_TTL_MS=60000
POLICY_CACHE_MAX_SIZE=10000
POLICY_REFRESH_INTERVAL_MS=30000

# Fallback Configuration (when Redis is unavailable)
FALLBACK_RPM=100
FALLBACK_BURST_CAPACITY=50

# Circuit Breaker Configuration
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_MS=10000
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=3

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# Metrics
METRICS_PORT=9090
METRICS_PATH=/metrics

# JWT Configuration (for identity extraction)
JWT_SECRET=your-secret-key-change-in-production
JWT_HEADER=Authorization

# Abuse Detection Configuration
ABUSE_DETECTION_ENABLED=true
ABUSE_DETECTION_CHECK_INTERVAL_MS=60000   # 1 minute
ABUSE_THROTTLE_THRESHOLD=0.5              # 50% throttle rate
ABUSE_DETECTION_WINDOW_MINUTES=1          # Detection window
ABUSE_PENALTY_DURATION_MS=60000           # 1 minute penalty
ABUSE_PENALTY_TYPE=penalty_multiplier     # or temporary_ban
ABUSE_PENALTY_MULTIPLIER=0.5              # 50% reduction

# Prometheus URL (use localhost for local dev, prometheus:9090 in Docker)
PROMETHEUS_URL=http://localhost:9090
